<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>√ñryggisbil ‚Äì Kennsluefni</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: { fontFamily: { sans: ['Inter', 'sans-serif'] } } }
    }
  </script>

  <style>
    body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  </style>

  <!-- MathJax stillingar -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      },
      svg: { fontCache: 'global' }
    };
  </script>
  <!-- Mikilv√¶gt: ekki async/defer -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>

<body class="bg-gray-100 font-sans">

  <div class="container mx-auto max-w-3xl bg-white shadow-xl rounded-lg my-8 sm:my-12">
    <div class="p-6 sm:p-10">
      
      <h1 class="text-3xl sm:text-4xl font-bold text-center mb-8 text-indigo-700">
        Skiljum √ñryggisbil
      </h1>

      <!-- Kennslutexti -->
      <section class="mb-8">
        <h2 class="text-2xl font-semibold mb-4 pb-2 border-b border-gray-300 text-gray-800">
          Hva√∞ er √∂ryggisbil?
        </h2>
        <div class="prose prose-lg max-w-none text-gray-700 space-y-4">
          <p>
            √ñryggisbil er svi√∞ gilda sem l√≠klegt er a√∞ innihaldi raunverulegt gildi √°kve√∞innar √æ√Ω√∞isbreytu.
            √ûa√∞ er oftast gefi√∞ upp sem 95% √∂ryggisbil.
          </p>
          <p>
            D√¶mi: vi√∞ t√∂kum √∫rtak $n = 100$ me√∞ me√∞alh√¶√∞ $\bar{x} = 175$ cm og sta√∞alfr√°vik $s = 10$ cm.
            √û√° er √∂ryggisbil reikna√∞ me√∞:
            <br>
            <strong class="font-mono block text-center my-3 bg-gray-50 p-2 rounded">
              $\bar{x} \pm Z \cdot \frac{s}{\sqrt{n}}$
            </strong>
          </p>
        </div>
      </section>

      <!-- Gagnvirkt pr√≥f -->
      <section id="quiz">
        <h2 class="text-2xl font-semibold mb-6 pb-2 border-b border-gray-300 text-gray-800">
          Pr√≥fa√∞u √æekkingu √æ√≠na
        </h2>
        
        <form id="quiz-form">
          <div id="quiz-container" class="space-y-6"></div>
        </form>

        <div class="mt-8 text-center">
          <button id="check-answers-btn"
            class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition text-lg shadow-md">
            Yfirfara sv√∂r
          </button>
          <button id="retry-btn"
            class="bg-gray-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-600 transition text-lg shadow-md ml-4 hidden">
            Reyna aftur
          </button>
        </div>

        <div id="results" class="mt-8 text-2xl font-bold text-center p-4 rounded-lg"></div>
      </section>

    </div>
  </div>

  <!-- JavaScript (MathJax virkar √æv√≠ √æa√∞ er hla√∞i√∞ √° undan) -->
  <script>
    const questions = [
      {
        question: "Hva√∞ √æ√Ω√∞ir 95% √∂ryggisbil?",
        options: [
          "A√∞ 95% l√≠kur s√©u √° a√∞ me√∞altal √∫rtaksins s√© r√©tt",
          "A√∞ 95% af g√∂gnunum s√©u √° bilinu",
          "A√∞ ef vi√∞ endurt√∂kum tilraunina oft, myndu 95% bilanna innihalda sanna gildi√∞",
          "A√∞ √æa√∞ s√©u 5% l√≠kur √° villu √≠ √∫treikningum"
        ],
        answer: 2
      },
      {
        question: "Form√∫lan fyrir √∂ryggisbil er $\\bar{x} \\pm Z \\cdot (\\frac{s}{\\sqrt{n}})$. Hva√∞ t√°knar st√¶r√∞in $Z \\cdot (\\frac{s}{\\sqrt{n}})$?",
        options: [
          "Sta√∞alvilla (Standard Error)",
          "Vikm√∂rk (Margin of Error)",
          "Me√∞altal",
          "Sta√∞alfr√°vik"
        ],
        answer: 1
      },
      {
        question: "Gefi√∞ er $n = 100$, $s = 10$. Hver er sta√∞alvillan $SE = \\frac{s}{\\sqrt{n}}$?",
        options: ["1", "10", "0.1", "100"],
        answer: 0
      }
    ];

    const quizContainer = document.getElementById('quiz-container');
    const checkBtn = document.getElementById('check-answers-btn');
    const retryBtn = document.getElementById('retry-btn');
    const results = document.getElementById('results');
    const quizForm = document.getElementById('quiz-form');

    // --- Byggir spurningarnar og rendrar MathJax ---
    function buildQuiz() {
      quizContainer.innerHTML = '';
      questions.forEach((q, i) => {
        const div = document.createElement('div');
        div.className = 'p-5 border border-gray-200 rounded-lg';
        div.innerHTML = `
          <p class="text-lg font-semibold mb-4">${i + 1}. ${q.question}</p>
          ${q.options.map((opt, j) => `
            <label class="block p-3 rounded-md border hover:bg-gray-100 cursor-pointer">
              <input type="radio" name="q${i}" value="${j}" class="mr-2">
              ${opt}
            </label>
          `).join('')}
        `;
        quizContainer.appendChild(div);
      });

      // üëâ MathJax rendrar allar form√∫lur √≠ spurningunum
      MathJax.typesetPromise([quizContainer]);
    }

    // --- Athugar sv√∂r ---
    function checkAnswers() {
      let score = 0;
      questions.forEach((q, i) => {
        const sel = quizForm.querySelector(`input[name="q${i}"]:checked`);
        if (sel && parseInt(sel.value) === q.answer) score++;
      });
      const ratio = score / questions.length;
      results.textContent = `√û√∫ f√©kkst ${score} af ${questions.length} r√©tt.`;
      results.className =
        'mt-8 text-2xl font-bold text-center p-4 rounded-lg ' +
        (ratio >= 0.8 ? 'bg-green-100 text-green-800'
          : ratio >= 0.5 ? 'bg-yellow-100 text-yellow-800'
          : 'bg-red-100 text-red-800');

      checkBtn.classList.add('hidden');
      retryBtn.classList.remove('hidden');
    }

    // --- Endurstillir pr√≥fi√∞ ---
    function retryQuiz() {
      quizForm.reset();
      results.textContent = '';
      checkBtn.classList.remove('hidden');
      retryBtn.classList.add('hidden');
      buildQuiz();
    }

    checkBtn.addEventListener('click', checkAnswers);
    retryBtn.addEventListener('click', retryQuiz);

    // --- Keyrum upphaf ---
    buildQuiz();
  </script>
</body>
</html>
